
<% if @recipe.photo.attached? %>
    <%= cl_image_tag @recipe.photo.key, height: 288, crop: :fill, gravity: :auto, class:"rounded-md w-full" %>
  <% elsif @recipe.category == "EZPZ" %>
    <%= image_tag "ezpz.jpg", height: 288, width: 336, crop: :fill, gravity: :auto, class:"rounded-md w-full" %>
  <% elsif @recipe.category == "Classique" %>
    <%= image_tag "classique.jpg", height: 288, width: 336, crop: :fill, gravity: :auto, class:"rounded-md w-full" %>
  <% elsif @recipe.category == "Master chef" %>
    <%= image_tag "master-chef.jpg", height: 288, width: 336, crop: :fill, gravity: :auto, class:"rounded-md w-full" %>
  <% else %>
    <%= image_tag "dessert.jpg", height: 288, width: 336, crop: :fill, gravity: :auto, class:"rounded-md w-full" %>
<% end %>


<div class="p-4 mb-6 bg-creme rounded-md">
  <h2 class="text-xl mb-1"><%= @recipe.title %></h2>

  <% if current_user != nil && current_user == @recipe.user %>
    <%= link_to edit_recipe_path(@recipe.id) do %>
      <i class="fas fa-pencil-alt hover:text-gray-400"></i>
    <% end %>
  <% end %>

    <div class="flex items-center mb-4 mx-2">
      <p class="mr-4 text-xs">👩‍🍳 <%= @recipe.prep_time %> min</p>
      <p class="text-xs">⏲ <%= @recipe.cooking_time %> min</p>
    </div>

  <p class="italic mx-2 mb-5"> « <%= @recipe.note %> » </p>

  <div class="mb-5">
    <h3 class="text-base mb-2">Les ingrédients</h3>

    <ul class="list-inside list-disc pl-2">
      <%  @recipe.quantities.each do |quantity| %>

        <% if quantity.mesure == "Pâte(s)" %>
            <li class="mb-1 text-sm"> <%= quantity.q %> <%= quantity.mesure.downcase%> <%= quantity.ingredient.name.downcase %></li>
        <% elsif quantity.mesure == "(rien)" %>
            <li class="mb-1 text-sm"> <%= quantity.q %> <%= quantity.ingredient.name.downcase %></li>
        <% else %>
            <li class="mb-1 text-sm"> <%= quantity.q %> <%= quantity.mesure.downcase  %> de <%= quantity.ingredient.name.downcase %></li>
        <% end %>

      <% end %>
    </ul>
  </div>


  <div>
    <h3 class="text-base mb-2">La préparation</h3>

      <div class="ml-2">
        <% i = 0 %>

        <%  @recipe.steps.each do |step| %>
          <% i += 1 %>
          <p class="mb-2 text-sm"> <b class="mr-2"><%= i %>. </b> <%= step.description %> </p>
        <% end %>
      </div>
  </div>

</div>
